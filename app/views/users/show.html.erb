<div class="large-10 large-centered columns user-profile radius">
	<div id="user-container">
		<div class="large-2 columns center-children">
			<div class="user-avatar">
				<% if @user.avatar.length > 0 %>
					<%= image_tag @user.avatar, width: 140, height: 90 %>
				<% else %>
					<%= image_tag 'avatar.png', width: 140, height: 90 %>
				<% end %>
			</div>
		</div>
		<div class="large-10 columns center-children">
			<% if @user == current_user %>
				<div class="dropdown-button">
					<%= link_to image_tag('dropdown.png'), user_path(@user), remote: true, data: {:"reveal-id" => "reveal-user-options"} %>
				</div>
			<% end %>
			<div class="user-info">
				<div class="large-3 columns user-name">
					<h3 class="profile-heading"><%= @user.name %></h3>
				</div>
				<div class="large-2 columns user-score">
					<%= @user_score %>p
				</div>
				<div class="large-2 columns user-follow">
					<%= link_to "#{@user.followers.length} följare", user_path(@user), data: {:"reveal-id" => "reveal-followers"} %>
				</div>
				<div class="large-2 columns user-follow">
					<%= link_to "Följer #{@user.follows.length}", user_path(@user), data: {:"reveal-id" => "reveal-follows"} %>
				</div>
				<div class="large-3 columns user-progress">
				 	<div class="completion-bar-profile">
						<div class="fill" style="width:<%=((@total_posts_count.to_f / @total_achievements_count.to_f) * 100).round(1) %>%;">
							<p class="user_profile"><%= @total_posts_count.to_s + "/" + @total_achievements_count.to_s %></p> 
						</div>
		      </div>
				</div>
			</div>
		</div>
	</div>
</div>

<!-- Popups -->

<div id="reveal-user-options" class="reveal-modal small medal-modal large-10 medium-10 columns" data-reveal aria-labelledby="modalTitle" aria-hidden="true" role="dialog">
	<a class="close-reveal-modal close-fix" aria-label="Close">&#215;</a>
	<%= render partial: 'edit_avatar' %>	
</div>

<div id="reveal-followers" class="reveal-modal small followers-modal large-10 medium-10 columns" data-reveal aria-labelledby="modalTitle" aria-hidden="true" role="dialog">
	<a class="close-reveal-modal close-fix" aria-label="Close">&#215;</a>
	<div class="large-12 columns">
		<% if @user.followers.length > 0 %>
			<% @user.followers.each do |user| %>
				<%= link_to user_path(user) do %>
					<% if user.avatar.url %>
				    	<%= image_tag(user.avatar, size: "30") %>
				   	<% else %>
						<%= image_tag('avatar.png', size: "30") %>
					<% end %>
					<%= user.name %><br/>
				<% end %>
			<% end %>
		<% else %>
			<h2 class="popup-text">Den här användaren har inga följare ännu.</h2>
		<% end %>
	</div>
</div>

<div id="reveal-follows" class="reveal-modal small follows-modal large-10 medium-10 columns" data-reveal aria-labelledby="modalTitle" aria-hidden="true" role="dialog">
	<a class="close-reveal-modal close-fix" aria-label="Close">&#215;</a>
	<div class="large-12 columns">
		<% if @user.follows.length > 0 %>
			<% @user.follows.each do |user| %>
				<%= link_to user_path(user) do %>
					<% if user.followable.avatar.url %>
				    	<%= image_tag(user.followable.avatar, size: "30") %>
				   	<% else %>
						<%= image_tag('avatar.png', size: "30") %>
					<% end %>
					<%= user.followable.name %><br/>
				<% end %>
			<% end %>
		<% else %>
			<h2 class="popup-text">Den här användaren följer ingen ännu.</h2>
		<% end %>
	</div>
</div>

<div class="medium-12 medium-centered large-12 large-centered columns user-achievements">
	<div id="masonry-container" class="transitions-enabled infinite-scroll clearfix media-container">	
	<div class="done-achievements">
<div class="medium-12 medium-centered large-12 large-centered columns">
	<div id="masonry-container" class="transitions-enabled infinite-scroll clearfix media-container">	<div class="done-achievements">
			<%= render @posts %>
		</div>
	</div>
</div>
<script type="text/javascript">
	user = <%= @user.id %>;
</script>